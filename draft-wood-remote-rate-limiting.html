<!DOCTYPE html>
<html lang="en" class="Internet-Draft">
<head>
<meta charset="utf-8">
<meta content="Common,Latin" name="scripts">
<meta content="initial-scale=1.0" name="viewport">
<title>The Remote Rate Limiting Protocol</title>
<meta content="Christopher A. Wood" name="author">
<meta content="
       This document specifies the remote rate limiting protocol. It is designed
to enable collaborative rate limiting between privacy proxy providers and
target services. It is one mechanism amongst others for dealing with abusive
traffic that negatively affects target services. 
    " name="description">
<meta content="xml2rfc 3.17.5" name="generator">
<meta content="Internet-Draft" name="keyword">
<meta content="draft-wood-remote-rate-limiting-latest" name="ietf.draft">
<!-- Generator version information:
  xml2rfc 3.17.5
    Python 3.11.4
    ConfigArgParse 1.5.3
    google-i18n-address 3.1.0
    intervaltree 3.1.0
    Jinja2 3.1.2
    lxml 4.9.3
    platformdirs 3.10.0
    pycountry 22.3.5
    PyYAML 6.0
    requests 2.31.0
    setuptools 67.7.2
    six 1.16.0
    wcwidth 0.2.6
-->
<link href="draft-wood-remote-rate-limiting.xml" rel="alternate" type="application/rfc+xml">
<link href="#copyright" rel="license">
<style type="text/css">@font-face {
  font-family: 'Lora';
  font-style: italic;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Italic'), local('Lora-Italic'), url('https://martinthomson.github.io/rfc-css/fonts/lora-italic-cyrillic-ext.woff2') format('woff2');
  unicode-range: U+0460-052F, U+1C80-1C88, U+20B4, U+2DE0-2DFF, U+A640-A69F, U+FE2E-FE2F;
}
@font-face {
  font-family: 'Lora';
  font-style: italic;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Italic'), local('Lora-Italic'), url('https://martinthomson.github.io/rfc-css/fonts/lora-italic-cyrillic-ext.woff2') format('woff2');
  unicode-range: U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116;
}
@font-face {
  font-family: 'Lora';
  font-style: italic;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Italic'), local('Lora-Italic'), url('https://martinthomson.github.io/rfc-css/fonts/lora-italic-vietnamese.woff2') format('woff2');
  unicode-range: U+0102-0103, U+0110-0111, U+1EA0-1EF9, U+20AB;
}
@font-face {
  font-family: 'Lora';
  font-style: italic;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Italic'), local('Lora-Italic'), url('https://martinthomson.github.io/rfc-css/fonts/lora-italic-latin-ext.woff2') format('woff2');
  unicode-range: U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF;
}

@font-face {
  font-family: 'Lora';
  font-style: italic;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Italic'), local('Lora-Italic'), url('https://martinthomson.github.io/rfc-css/fonts/lora-italic-latin.woff2') format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Regular'), local('Lora-Regular'), url('https://martinthomson.github.io/rfc-css/fonts/lora-regular-cyrillic-ext.woff2') format('woff2');
  unicode-range: U+0460-052F, U+1C80-1C88, U+20B4, U+2DE0-2DFF, U+A640-A69F, U+FE2E-FE2F;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Regular'), local('Lora-Regular'), url('https://martinthomson.github.io/rfc-css/fonts/lora-regular-cyrillic.woff2') format('woff2');
  unicode-range: U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Regular'), local('Lora-Regular'), url('https://martinthomson.github.io/rfc-css/fonts/lora-regular-vietnamese.woff2') format('woff2');
  unicode-range: U+0102-0103, U+0110-0111, U+1EA0-1EF9, U+20AB;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Regular'), local('Lora-Regular'), url('https://martinthomson.github.io/rfc-css/fonts/lora-regular-latin-ext.woff2') format('woff2');
  unicode-range: U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Regular'), local('Lora-Regular'), url('https://martinthomson.github.io/rfc-css/fonts/lora-regular-latin.woff2') format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}

@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 700;
  font-display: swap;
  src: local('Lora Bold'), local('Lora-Bold'), url('https://martinthomson.github.io/rfc-css/fonts/lora-bold-cyrillic-ext.woff2') format('woff2');
  unicode-range: U+0460-052F, U+1C80-1C88, U+20B4, U+2DE0-2DFF, U+A640-A69F, U+FE2E-FE2F;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 700;
  font-display: swap;
  src: local('Lora Bold'), local('Lora-Bold'), url('https://martinthomson.github.io/rfc-css/fonts/lora-bold-cyrillic.woff2') format('woff2');
  unicode-range: U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 700;
  font-display: swap;
  src: local('Lora Bold'), local('Lora-Bold'), url('https://martinthomson.github.io/rfc-css/fonts/lora-bold-vietnamese.woff2') format('woff2');
  unicode-range: U+0102-0103, U+0110-0111, U+1EA0-1EF9, U+20AB;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 700;
  font-display: swap;
  src: local('Lora Bold'), local('Lora-Bold'), url('https://martinthomson.github.io/rfc-css/fonts/lora-bold-latin-ext.woff2') format('woff2');
  unicode-range: U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 700;
  font-display: swap;
  src: local('Lora Bold'), local('Lora-Bold'), url('https://martinthomson.github.io/rfc-css/fonts/lora-bold-latin.woff2') format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 600;
  font-display: swap;
  src: local('Lora SemiBold'), local('Lora-SemiBold'), url('https://martinthomson.github.io/rfc-css/fonts/lora-semibold-latin.woff2') format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}

@font-face {
  font-family: 'Cabin Condensed';
  font-style: normal;
  font-weight: 600;
  font-display: swap;
  src: local('Cabin Condensed SemiBold'), local('CabinCondensed-SemiBold'), url('https://martinthomson.github.io/rfc-css/fonts/cabincondensed-semibold-vietnamese.woff2') format('woff2');
  unicode-range: U+0102-0103, U+0110-0111, U+1EA0-1EF9, U+20AB;
}
@font-face {
  font-family: 'Cabin Condensed';
  font-style: normal;
  font-weight: 600;
  font-display: swap;
  src: local('Cabin Condensed SemiBold'), local('CabinCondensed-SemiBold'), url('https://martinthomson.github.io/rfc-css/fonts/cabincondensed-semibold-latin-ext.woff2') format('woff2');
  unicode-range: U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF;
}
@font-face {
  font-family: 'Cabin Condensed';
  font-style: normal;
  font-weight: 600;
  font-display: swap;
  src: local('Cabin Condensed SemiBold'), local('CabinCondensed-SemiBold'), url('https://martinthomson.github.io/rfc-css/fonts/cabincondensed-semibold-latin.woff2') format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}

@font-face {
  font-family: 'Oxygen Mono';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: local('Oxygen Mono'), local('OxygenMono-Regular'), url('https://martinthomson.github.io/rfc-css/fonts/oxygenmono-regular-latin-ext.woff2') format('woff2');
  unicode-range: U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF;
}
@font-face {
  font-family: 'Oxygen Mono';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: local('Oxygen Mono'), local('OxygenMono-Regular'), url('https://martinthomson.github.io/rfc-css/fonts/oxygenmono-regular-latin.woff2') format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}

:root {
  color-scheme: light dark;
  --background-color: #fff;
  --text-color: #222;
  --title-color: #191919;
  --link-color: #2a6496;
  --highlight-color: #f9f9f9;
  --line-color: #eee;
  --pilcrow-weak: #ddd;
  --pilcrow-strong: #bbb;
  --small-font-size: 14.5px;
  --font-mono: 'Oxygen Mono', monospace;
  scrollbar-color: #bbb #eee;
}
body {
  max-width: 600px;
  margin: 75px auto;
  padding: 0 5px;
  color: var(--text-color);
  background-color: var(--background-color);
  font: 16px/22px "Lora", serif;
  scroll-behavior: smooth;
}

.ears {
  display: none;
}

/* headings */
h1, h2, h3, h4, h5, h6 {
  font-family: "Cabin Condensed", sans-serif;
  font-weight: 600;
  margin: 0.8em 0 0.3em;
  font-size-adjust: 0.5;
  color: var(--title-color);
}
h1#title {
  font-size: 32px;
  line-height: 40px;
  clear: both;
}
h1#title, h1#rfcnum {
  margin: 1.5em 0 0.2em;
}
h1#rfcnum + h1#title {
  margin: 0.2em 0;
}

h1, h2, h3 {
  font-size: 22px;
  line-height: 27px;
}
h4, h5, h6 {
  font-size: 20px;
  line-height: 24px;
}

/* general structure */
.author {
  padding-bottom: 0.3em;
}
#abstract+p {
  font-size: 18px;
  line-height: 24px;
}
#abstract+p code, #abstract+p samp, #abstract+p tt {
  font-size: 16px;
  line-height: 0;
}

p {
  padding: 0;
  margin: 0.5em 0;
  text-align: left;
}
div {
  margin: 0;
}
.alignRight.art-text {
  background-color: var(--highlight-color);
  border: 1px solid var(--line-color);
  border-radius: 3px;
  padding: 0.5em 1em 0;
  margin-bottom: 0.5em;
}
.alignRight.art-text pre {
  padding: 0;
  width: auto;
}
.alignRight {
  margin: 1em 0;
}
.alignRight > *:first-child {
  border: none;
  margin: 0;
  float: right;
  clear: both;
}
.alignRight > *:nth-child(2) {
  clear: both;
  display: block;
  border: none;
}
svg {
  display: block;
}
/* font-family isn't space-separated, but =~ will have to do */
svg[font-family~="monospace" i], svg [font-family~="monospace" i] {
  font-family: var(--font-mono);
}
.alignCenter.art-text {
  background-color: var(--highlight-color);
  border: 1px solid var(--line-color);
  border-radius: 3px;
  padding: 0.5em 1em 0;
  margin-bottom: 0.5em;
}
.alignCenter.art-text pre {
  padding: 0;
  width: auto;
}
.alignCenter {
  margin: 1em 0;
}
.alignCenter > *:first-child {
  border: none;
  /* this isn't optimal, but it's an existence proof.  PrinceXML doesn't
     support flexbox yet.
  */
  display: table;
  margin: 0 auto;
}

/* lists */
ol, ul {
  padding: 0;
  margin: 0 0 0.5em 2em;
}
:is(ol, ul) :is(ol, ul) {
  margin-left: 1em;
}
li {
  margin: 0 0 0.25em 0;
}
.ulCompact li {
  margin: 0;
}
ul.empty, .ulEmpty {
  list-style-type: none;
}
ul.empty li, .ulEmpty li {
  margin-top: 0.5em;
}
:is(ul, ol).compact, .ulCompact, .olCompact {
  line-height: 1;
  margin: 0 0 0 2em;
}

/* definition lists */
dl {
  clear: left;
  --indent: 3ch;
  /* --indent: attr(indent ch); not supported in any browser, but we can dream */
}
dl.olPercent {
  --indent: 5ch;
}
dl > dt {
  float: left;
  margin-right: 2ch;
  min-width: 8ch;
}
dl.dlNewline > dt {
  float: none;
}
dl > dd {
  margin-bottom: .8em;
  margin-left: var(--indent) !important; /* stupid element overrides */
  min-height: 2ex;
}
dl.olPercent > dt {
  min-width: calc(var(--indent) - 2ch);
}
:is(dl.compact, .dlCompact) > dd {
  margin-bottom: 0;
}
:is(dl.compact, .dlCompact) > dd > :is(:first-child, .break:first-child + *) {
  margin-top: 0;
}
:is(dl.compact, .dlCompact) > dd > :is(:last-child) {
  margin-bottom: 0;
}
dl > dd > dl {
  margin-top: 0.5em;
  margin-bottom: 0;
}
:is(dd, span).break {
  display: none;
}

/* links */
a, a[href].selfRef:hover {
  text-decoration: none;
}
a[href] {
  color: var(--link-color);
}
a[href].selfRef, .iref + a[href].internal {
  color: var(--text-color);
}
a[href]:hover {
  text-decoration: underline;
}
a[href].selfRef:hover {
  background-color: var(--highlight-color);
}
a.xref:is(.cite, .auto), :is(#status-of-memo, #copyright) a {
  white-space: nowrap;
}

/* Figures */
tt, code, pre {
  background-color: var(--highlight-color);
  font: 14px/22px var(--font-mono);
}
tt, code {
  /* changing the font for inline elements leads to different ascender
     and descender heights; as we want to retain baseline alignment,
     remove leading to avoid altering the final height of lines
     note: this fails if these blocks take an entire line,
     a different solution would be great */
  line-height: 0;
}
:is(h1, h2, h3, h4, h5, h6) :is(tt, code) {
  font-size: 84%;
}
pre {
  border: 1px solid var(--line-color);
  font-size: 13.5px;
  line-height: 16px;
  letter-spacing: -0.2px;
  margin: 5px;
  padding: 5px;
}
img {
  max-width: 100%;
}
figure {
  margin: 0.5em 0;
  padding: 0;
}
figure blockquote {
  margin: 0.8em 0.4em 0.4em;
}
figcaption, caption {
  font-style: italic;
  margin: 0.5em 1.5em;
  text-align: left;
}
@media screen {
  /* Auto-collapse boilerplate. */
  :is(#status-of-memo, #copyright) p {
    margin: -2px 0;
    max-height: 0;
    transition: max-height 2s ease, margin 0.5s ease 0.5s;
    overflow: hidden;
  }
  :is(#status-of-memo, #copyright):hover p,
  :is(#status-of-memo, #copyright) h2:target ~ p {
    margin: 0.5em 0;
    max-height: 500px;
    overflow: auto;
  }
  pre, svg {
    display: inline-block;
    overflow-x: auto;
  }
  pre {
    max-width: 100%;
    width: calc(100% - 22px - 1em);
  }
  svg {
    max-width: calc(100% - 22px - 1em);
  }
  figure pre {
    display: block;
    width: calc(100% - 25px);
  }
  :is(pre, svg) + .pilcrow {
    display: inline-block;
    vertical-align: text-bottom;
    padding-bottom: 8px;
  }
}

/* aside, blockquote */
aside, blockquote {
  margin-left: 0;
  padding: 0 2em;
  font-style: italic;
}
blockquote {
  margin: 1em 0;
}
cite {
  display: block;
  text-align: right;
  font-style: italic;
}

/* tables */
table {
  max-width: 100%;
  margin: 0 0 1em;
  border-collapse: collapse;
}
table.right {
  margin-left: auto;
}
table.center {
  margin-left: auto;
  margin-right: auto;
}
table.left {
  margin-right: auto;
}
thead, tbody {
  border: 1px solid var(--line-color);
}
th, td {
  text-align: left;
  vertical-align: top;
  padding: 5px 10px;
}
th {
  background-color: var(--line-color);
}
:is(tr:nth-child(2n), thead+tbody > tr:nth-child(2n+1)) > td {
  background-color: var(--background-color);
}
:is(tr:nth-child(2n+1), thead+tbody > tr:nth-child(2n)) > td {
  background-color: var(--highlight-color);
}
table caption {
  margin: 0;
  padding: 3px 0 3px 1em;
}
table p {
  margin: 0;
}

/* pilcrow */
a.pilcrow {
  margin-left: 3px;
  opacity: 0.2;
  user-select: none;
}
a.pilcrow[href] { color: var(--pilcrow-weak); }
a.pilcrow[href]:hover { text-decoration: none; }
@media not print {
  :hover > a.pilcrow {
    opacity: 1;
  }
  a.pilcrow[href]:hover {
    color: var(--pilcrow-strong);
    background-color: transparent;
  }
}
@media print {
  a.pilcrow {
    display: none;
  }
}

/* misc */
hr {
  border: 0;
  border-top: 1px solid var(--line-color);
}
.bcp14 {
  font-variant: small-caps;
  font-weight: 600;
  font-size: var(--small-font-size);
}
.role {
  font-variant: all-small-caps;
}
sub, sup {
  line-height: 1;
  font-size: 80%;
}

/* info block */
#identifiers {
  margin: 0;
  font-size: var(--small-font-size);
  line-height: 18px;
  --identifier-width: 15ch;
}
#identifiers dt {
  width: var(--identifier-width);
  min-width: var(--identifier-width);
  clear: left;
  float: left;
  text-align: right;
  margin-right: 1ch;
}
#identifiers dd {
  margin: 0;
  margin-left: calc(1em + var(--identifier-width)) !important;
  min-width: 5em;
}
#identifiers .authors .author {
  display: inline-block;
  margin-right: 1.5em;
}
#identifiers .authors .org {
  font-style: italic;
}

/* The prepared/rendered info at the very bottom of the page */
.docInfo {
  color: #999;
  font-size: 0.9em;
  font-style: italic;
  margin-top: 2em;
}
.docInfo .prepared {
  float: left;
}
.docInfo .prepared {
  float: right;
}

/* table of contents */
#toc {
  padding: 0.75em 0 2em 0;
  margin-bottom: 1em;
}
#toc nav ul {
  margin: 0 0.5em 0 0;
  padding: 0;
  list-style: none;
}
#toc nav li {
  line-height: 1.3em;
  margin: 0.75em 0;
  padding-left: 1.2em;
  text-indent: -1.2em;
}
#toc a.xref {
  white-space: normal;
}
/* references */
.references dt {
  text-align: right;
  font-weight: bold;
  min-width: 10ch;
  margin-right: 1.5ch;
}
.references dt:target::before {
  content: "⇒";
  width: 15px;
  margin: 0 10px 0 -25px;
}
.references dd {
  margin-left: 12ch !important;
  overflow: auto;
}

.refInstance {
  margin-bottom: 1.25em;
}

.references .ascii {
  margin-bottom: 0.25em;
}

/* index */
#rfc\.index\.index + ul {
  margin-left: 0;
}

/* authors */
address.vcard {
  font-style: normal;
  margin: 1em 0;
}
address.vcard .nameRole {
  font-weight: 700;
  margin-left: 0;
}
address.vcard .label {
  margin: 0.5em 0;
}
address.vcard .type {
  display: none;
}
.alternative-contact {
  margin: 1.5em 0 1em;
}
hr.addr {
  border-top: 1px dashed;
  margin: 0;
  color: #ddd;
  max-width: calc(100% - 16px);
}
@media (min-width: 500px) {
  #authors-addresses > section {
    column-count: 2;
    column-gap: 20px;
  }
  #authors-addresses > section > h2 {
    column-span: all;
  }
  /* hack for break-inside: avoid-column */
  #authors-addresses address {
    display: inline-block;
    break-inside: avoid-column;
  }
}

.rfcEditorRemove p:first-of-type {
  font-style: italic;
}
.cref {
  background-color: rgba(249, 232, 105, 0.3);
  padding: 2px 4px;
}
.crefSource {
  font-style: italic;
}
/* alternative layout for smaller screens */
@media screen and (max-width: 929px) {
  #toc {
    position: fixed;
    z-index: 2;
    top: 0;
    right: 0;
    padding: 0;
    margin: 0;
    border-bottom: 1px solid #ccc;
    opacity: 0.6;
  }
  #toc.active {
      opacity: 1;
  }
  #toc h2 {
    margin: 0;
    padding: 2px 0 2px 6px;
    padding-right: 1em;
    font-size: 18px;
    line-height: 24px;
    min-width: 190px;
    text-align: right;
    background-color: #444;
    color: white;
    cursor: pointer;
  }
  #toc h2::before { /* css hamburger */
    float: right;
    position: relative;
    width: 1em;
    height: 1px;
    left: -164px;
    margin: 8px 0 0 0;
    background: white none repeat scroll 0 0;
    box-shadow: 0 4px 0 0 white, 0 8px 0 0 white;
    content: "";
  }
  #toc nav {
    display: none;
    background-color: var(--background-color);
    padding: 0.5em 1em 1em;
    overflow: auto;
    overscroll-behavior: contain;
    height: calc(100vh - 48px);
    border-left: 1px solid #ddd;
  }
  #toc.active nav {
    display: block;
  }
  /* Make the collapsed ToC header render white on gray also when it's a link */
  #toc h2 a,
  #toc h2 a:link,
  #toc h2 a:focus,
  #toc h2 a:hover,
  #toc a.toplink,
  #toc a.toplink:hover {
    color: white;
    background-color: #444;
    text-decoration: none;
  }
  #toc a.toplink {
    margin-top: 2px;
  }
}

/* alternative layout for wide screens */
@media screen and (min-width: 930px) {
  body {
    padding-right: 360px;
    padding-right: calc(min(180px + 20%, 500px));
  }
  #toc {
    position: fixed;
    bottom: 0;
    right: 0;
    right: calc(50vw - 480px);
    width: 312px;
    margin: 0;
    padding: 0;
    z-index: 1;
  }
  #toc h2 {
    margin: 0;
    padding: 0.25em 1em 1em 0;
  }
  #toc nav {
    display: block;
    height: calc(90vh - 84px);
    bottom: 0;
    padding: 0.5em 0 2em;
    overflow: auto;
    overscroll-behavior: contain;
    scrollbar-width: thin;
  }
  #toc nav > ul  {
    margin-bottom: 2em;
  }
  #toc ul {
    margin: 0 0 0 4px;
    font-size: var(--small-font-size);
  }
  #toc ul :is(p, li) {
    margin: 2px 0;
    line-height: 22px;
  }
  img { /* future proofing */
    max-width: 100%;
    height: auto;
  }
}

/* pagination */
@media print {
  body {
    width: 100%;
  }
  p {
    orphans: 3;
    widows: 3;
  }
  #n-copyright-notice {
    border-bottom: none;
  }
  #toc, #n-introduction {
    page-break-before: always;
  }
  #toc {
    border-top: none;
    padding-top: 0;
  }
  figure, pre {
    page-break-inside: avoid;
  }
  figure {
    overflow: scroll;
  }
  h1, h2, h3, h4, h5, h6 {
    page-break-after: avoid;
  }
  h2+*, h3+*, h4+*, h5+*, h6+* {
    page-break-before: avoid;
  }
  pre {
    white-space: pre-wrap;
    word-wrap: break-word;
    font-size: 10pt;
  }
  table {
    border: 1px solid #ddd;
  }
  td {
    border-top: 1px solid #ddd;
  }
}

@page :first {
  padding-top: 0;
  @top-left {
    content: normal;
    border: none;
  }
  @top-center {
    content: normal;
    border: none;
  }
  @top-right {
    content: normal;
    border: none;
  }
}

@page {
  size: A4;
  margin-bottom: 45mm;
  padding-top: 20px;
}

/* Changes introduced to fix issues found during implementation */

/* Separate body from document info even without intervening H1 */
section {
  clear: both;
}

/* Top align author divs, to avoid names without organization dropping level with org names */
.author {
  vertical-align: top;
}

/* Style section numbers with more space between number and title */
.section-number {
  padding-right: 0.5em;
}

/* Add styling for a link in the ToC that points to the top of the document */
a.toplink {
  float: right;
  margin: 8px 0.5em 0;
}

/* Provide styling for table cell text alignment */
table .text-left {
  text-align: left;
}
table .text-center {
  text-align: center;
}
table .text-right {
  text-align: right;
}

/* Make the alternative author contact information look less like just another
   author, and group it closer with the primary author contact information */
.alternative-contact {
  margin: 0.5em 0 0.25em 0;
}
address .non-ascii {
  margin: 0 0 0 2em;
}

/* With it being possible to set tables with alignment
  left, center, and right, { width: 100%; } does not make sense */
table {
  width: auto;
}

/* Avoid reference text that sits in a block with very wide left margin,
   because of a long floating dt label.*/
.references dd {
  overflow: visible;
}

/* Control caption placement */
caption {
  caption-side: bottom;
}

/* Limit the width of the author address vcard, so names in right-to-left
   script don't end up on the other side of the page. */

address.vcard {
  max-width: 20em;
  margin-right: auto;
}

/* For address alignment dependent on LTR or RTL scripts */
address div.left {
  text-align: left;
}
address div.right {
  text-align: right;
}

/* Give the table caption label the same styling as the figcaption */

@media print {
  .toplink {
    display: none;
  }

  /* avoid overwriting the top border line with the ToC header */
  #toc {
    padding-top: 1px;
  }

  /* Avoid page breaks inside dl and author address entries */
  dd {
    page-break-before: avoid;
  }
  .vcard {
    page-break-inside: avoid;
  }

}

/* Dark mode. */
@media (prefers-color-scheme: dark) {
:root {
  --background-color: #121212;
  --text-color: #f0f0f0;
  --title-color: #fff;
  --link-color: #4da4f0;
  --highlight-color: #282828;
  --line-color: #444;
  --pilcrow-weak: #444;
  --pilcrow-strong: #666;
  scrollbar-color: #777 #333;
}
}

/* SVG Trick: a prefix match works because only black and white are allowed */
svg :is([stroke="black"], [stroke^="#000"]) {
  stroke: var(--text-color);
}
svg :is([stroke="white"], [stroke^="#fff"]) {
  stroke: var(--background-color);
}
svg :is([fill="black"], [fill^="#000"], :not([fill])) {
  fill: var(--text-color);
}
svg :is([fill="white"], [fill^="#fff"]) {
  fill: var(--background-color);
}
</style>

</head>
<body class="xml2rfc">
<table class="ears">
<thead><tr>
<td class="left">Internet-Draft</td>
<td class="center">Remote Rate Limiting Protocol</td>
<td class="right">August 2023</td>
</tr></thead>
<tfoot><tr>
<td class="left">Wood</td>
<td class="center">Expires 16 February 2024</td>
<td class="right">[Page]</td>
</tr></tfoot>
</table>
<div id="external-metadata" class="document-information"></div>
<div id="internal-metadata" class="document-information">
<dl id="identifiers">
<dt class="label-workgroup">Workgroup:</dt>
<dd class="workgroup">Network Working Group</dd>
<dt class="label-internet-draft">Internet-Draft:</dt>
<dd class="internet-draft">draft-wood-remote-rate-limiting-latest</dd>
<dt class="label-published">Published:</dt>
<dd class="published">
<time datetime="2023-08-15" class="published">15 August 2023</time>
    </dd>
<dt class="label-intended-status">Intended Status:</dt>
<dd class="intended-status">Standards Track</dd>
<dt class="label-expires">Expires:</dt>
<dd class="expires"><time datetime="2024-02-16">16 February 2024</time></dd>
<dt class="label-authors">Author:</dt>
<dd class="authors">
<div class="author">
      <div class="author-name">C. A. Wood</div>
<div class="org">Cloudflare</div>
</div>
</dd>
</dl>
</div>
<h1 id="title">The Remote Rate Limiting Protocol</h1>
<section id="section-abstract">
      <h2 id="abstract"><a href="#abstract" class="selfRef">Abstract</a></h2>
<p id="section-abstract-1">This document specifies the remote rate limiting protocol. It is designed
to enable collaborative rate limiting between privacy proxy providers and
target services. It is one mechanism amongst others for dealing with abusive
traffic that negatively affects target services.<a href="#section-abstract-1" class="pilcrow">¶</a></p>
</section>
<section class="note rfcEditorRemove" id="section-note.1">
      <h2 id="name-discussion-venues">
<a href="#name-discussion-venues" class="section-name selfRef">Discussion Venues</a>
      </h2>
<p id="section-note.1-1">This note is to be removed before publishing as an RFC.<a href="#section-note.1-1" class="pilcrow">¶</a></p>
<p id="section-note.1-2">Source for this draft and an issue tracker can be found at
    <span><a href="https://github.com/chris-wood/draft-wood-remote-rate-limiting">https://github.com/chris-wood/draft-wood-remote-rate-limiting</a></span>.<a href="#section-note.1-2" class="pilcrow">¶</a></p>
</section>
<div id="status-of-memo">
<section id="section-boilerplate.1">
        <h2 id="name-status-of-this-memo">
<a href="#name-status-of-this-memo" class="section-name selfRef">Status of This Memo</a>
        </h2>
<p id="section-boilerplate.1-1">
        This Internet-Draft is submitted in full conformance with the
        provisions of BCP 78 and BCP 79.<a href="#section-boilerplate.1-1" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-2">
        Internet-Drafts are working documents of the Internet Engineering Task
        Force (IETF). Note that other groups may also distribute working
        documents as Internet-Drafts. The list of current Internet-Drafts is
        at <span><a href="https://datatracker.ietf.org/drafts/current/">https://datatracker.ietf.org/drafts/current/</a></span>.<a href="#section-boilerplate.1-2" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-3">
        Internet-Drafts are draft documents valid for a maximum of six months
        and may be updated, replaced, or obsoleted by other documents at any
        time. It is inappropriate to use Internet-Drafts as reference
        material or to cite them other than as "work in progress."<a href="#section-boilerplate.1-3" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-4">
        This Internet-Draft will expire on 16 February 2024.<a href="#section-boilerplate.1-4" class="pilcrow">¶</a></p>
</section>
</div>
<div id="copyright">
<section id="section-boilerplate.2">
        <h2 id="name-copyright-notice">
<a href="#name-copyright-notice" class="section-name selfRef">Copyright Notice</a>
        </h2>
<p id="section-boilerplate.2-1">
            Copyright (c) 2023 IETF Trust and the persons identified as the
            document authors. All rights reserved.<a href="#section-boilerplate.2-1" class="pilcrow">¶</a></p>
<p id="section-boilerplate.2-2">
            This document is subject to BCP 78 and the IETF Trust's Legal
            Provisions Relating to IETF Documents
            (<span><a href="https://trustee.ietf.org/license-info">https://trustee.ietf.org/license-info</a></span>) in effect on the date of
            publication of this document. Please review these documents
            carefully, as they describe your rights and restrictions with
            respect to this document. Code Components extracted from this
            document must include Revised BSD License text as described in
            Section 4.e of the Trust Legal Provisions and are provided without
            warranty as described in the Revised BSD License.<a href="#section-boilerplate.2-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="toc">
<section id="section-toc.1">
        <a href="#" onclick="scroll(0,0)" class="toplink">▲</a><h2 id="name-table-of-contents">
<a href="#name-table-of-contents" class="section-name selfRef">Table of Contents</a>
        </h2>
<nav class="toc"><ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.1">
            <p id="section-toc.1-1.1.1" class="keepWithNext"><a href="#section-1" class="auto internal xref">1</a>.  <a href="#name-introduction" class="internal xref">Introduction</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2">
            <p id="section-toc.1-1.2.1" class="keepWithNext"><a href="#section-2" class="auto internal xref">2</a>.  <a href="#name-terminology" class="internal xref">Terminology</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3">
            <p id="section-toc.1-1.3.1" class="keepWithNext"><a href="#section-3" class="auto internal xref">3</a>.  <a href="#name-threat-model" class="internal xref">Threat Model</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4">
            <p id="section-toc.1-1.4.1"><a href="#section-4" class="auto internal xref">4</a>.  <a href="#name-overview" class="internal xref">Overview</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.1">
                <p id="section-toc.1-1.4.2.1.1"><a href="#section-4.1" class="auto internal xref">4.1</a>.  <a href="#name-offline-registration" class="internal xref">Offline Registration</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.2">
                <p id="section-toc.1-1.4.2.2.1"><a href="#section-4.2" class="auto internal xref">4.2</a>.  <a href="#name-online-rate-limit-enforceme" class="internal xref">Online Rate Limit Enforcement</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.2.2.1">
                    <p id="section-toc.1-1.4.2.2.2.1.1"><a href="#section-4.2.1" class="auto internal xref">4.2.1</a>.  <a href="#name-authentication" class="internal xref">Authentication</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.2.2.2">
                    <p id="section-toc.1-1.4.2.2.2.2.1"><a href="#section-4.2.2" class="auto internal xref">4.2.2</a>.  <a href="#name-validation-and-enforcement" class="internal xref">Validation and Enforcement</a></p>
</li>
                </ul>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.3">
                <p id="section-toc.1-1.4.2.3.1"><a href="#section-4.3" class="auto internal xref">4.3</a>.  <a href="#name-limitations" class="internal xref">Limitations</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5">
            <p id="section-toc.1-1.5.1"><a href="#section-5" class="auto internal xref">5</a>.  <a href="#name-applications" class="internal xref">Applications</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.1">
                <p id="section-toc.1-1.5.2.1.1"><a href="#section-5.1" class="auto internal xref">5.1</a>.  <a href="#name-ohttp-dos" class="internal xref">OHTTP DoS</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.2">
                <p id="section-toc.1-1.5.2.2.1"><a href="#section-5.2" class="auto internal xref">5.2</a>.  <a href="#name-port-scanning-dos" class="internal xref">Port Scanning DoS</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.3">
                <p id="section-toc.1-1.5.2.3.1"><a href="#section-5.3" class="auto internal xref">5.3</a>.  <a href="#name-volumetric-dos" class="internal xref">Volumetric DoS</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6">
            <p id="section-toc.1-1.6.1"><a href="#section-6" class="auto internal xref">6</a>.  <a href="#name-security-considerations" class="internal xref">Security Considerations</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7">
            <p id="section-toc.1-1.7.1"><a href="#section-7" class="auto internal xref">7</a>.  <a href="#name-iana-considerations" class="internal xref">IANA Considerations</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8">
            <p id="section-toc.1-1.8.1"><a href="#section-8" class="auto internal xref">8</a>.  <a href="#name-references" class="internal xref">References</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8.2.1">
                <p id="section-toc.1-1.8.2.1.1"><a href="#section-8.1" class="auto internal xref">8.1</a>.  <a href="#name-normative-references" class="internal xref">Normative References</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8.2.2">
                <p id="section-toc.1-1.8.2.2.1"><a href="#section-8.2" class="auto internal xref">8.2</a>.  <a href="#name-informative-references" class="internal xref">Informative References</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9">
            <p id="section-toc.1-1.9.1"><a href="#appendix-A" class="auto internal xref">Appendix A</a>.  <a href="#name-acknowledgements" class="internal xref">Acknowledgements</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.10">
            <p id="section-toc.1-1.10.1"><a href="#appendix-B" class="auto internal xref"></a><a href="#name-authors-address" class="internal xref">Author's Address</a></p>
</li>
        </ul>
</nav>
</section>
</div>
<div id="introduction">
<section id="section-1">
      <h2 id="name-introduction">
<a href="#section-1" class="section-number selfRef">1. </a><a href="#name-introduction" class="section-name selfRef">Introduction</a>
      </h2>
<p id="section-1-1">Privacy proxy systems such as those built on MASQUE <span>[<a href="#CONNECT-UDP" class="cite xref">CONNECT-UDP</a>]</span>,
Oblivious HTTP <span>[<a href="#OHTTP" class="cite xref">OHTTP</a>]</span>, and WireGuard <span>[<a href="#WIREGUARD" class="cite xref">WIREGUARD</a>]</span>.
provide one common feature: they mask a client's true IP address from the
targets to which clients interact with through these proxies. While this
offers meaningful privacy benefits to clients, it complicates common
operational security practices, such as IP addresses to help identify
and mitigate abusive traffic. Examples of abusive traffic include malicious
or otherwise malformed application data sent to targets through the proxies,
volumetric flooding attacks, and general (distributed) denial of service (DoS)
attacks. Naturally, absent some mechanism to apply granular rate limits
to individual client connections, targets are left with broad sweeping
mitigations that target the proxy service, such as IP-based rate limits,
and therefore affect all of its clients, including those which do not engage
in abusive behavior.<a href="#section-1-1" class="pilcrow">¶</a></p>
<p id="section-1-2">Proactively preventing abuse through (privacy-preserving) client authentication
is one alternative solution that can help mitigate such abuse in practice.
In particular, proxies can only admit service to authentiated clients, or
targets can use privacy-preserving authentication protocols such as Privacy
Pass <span>[<a href="#PRIVACY-PASS" class="cite xref">PRIVACY-PASS</a>]</span> to admit client traffic.
Another type of solution might be in form of some "humanity check" such as a
CAPTCHA, with the intent of making sure that some human is responsible for client
traffic rather than an automated bot. However, there are several important ways
in which these proactive techniques can be inadequate in practice:<a href="#section-1-2" class="pilcrow">¶</a></p>
<ol start="1" type="1" class="normal type-1" id="section-1-3">
<li id="section-1-3.1">Authorization decisions based on client authentication do not attest to
client behavior -- they only attest to the client identity. This means that
authenticated clients can still engage in abusive behavior.<a href="#section-1-3.1" class="pilcrow">¶</a>
</li>
        <li id="section-1-3.2">Authorization decisions based on humanity checks also do not attest to
client behavior. Humans interacting with an application can intentionally
initiate abusive traffic.<a href="#section-1-3.2" class="pilcrow">¶</a>
</li>
      </ol>
<p id="section-1-4">Reactive mitigation mechanisms complement proactive mechanisms. Reactive
mechanisms allow targets and proxy systems to work together to take
corrective action to minimize or remove abusive traffic.<a href="#section-1-4" class="pilcrow">¶</a></p>
<p id="section-1-5">This document describes a protocol that can implement one limited
form of reactive mitigation, called the remote rate limiting (RRL)
protocol. RRL builds on ACME to enable seamless registration and
configuration between proxies and targets. Targets use authentication
information from ACME to request rate limiting actions by the target.<a href="#section-1-5" class="pilcrow">¶</a></p>
</section>
</div>
<div id="terminology">
<section id="section-2">
      <h2 id="name-terminology">
<a href="#section-2" class="section-number selfRef">2. </a><a href="#name-terminology" class="section-name selfRef">Terminology</a>
      </h2>
<p id="section-2-1">The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL
NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "NOT RECOMMENDED",
"MAY", and "OPTIONAL" in this document are to be interpreted as
described in BCP 14 <span>[<a href="#RFC2119" class="cite xref">RFC2119</a>]</span> <span>[<a href="#RFC8174" class="cite xref">RFC8174</a>]</span> when, and only when, they
appear in all capitals, as shown here.<a href="#section-2-1" class="pilcrow">¶</a></p>
<span class="break"></span><dl class="dlParallel" id="section-2-2">
        <dt id="section-2-2.1">Client:</dt>
        <dd style="margin-left: 1.5em" id="section-2-2.2">
          <p id="section-2-2.2.1">An entity that interacts with remote services, called targets.<a href="#section-2-2.2.1" class="pilcrow">¶</a></p>
</dd>
        <dd class="break"></dd>
<dt id="section-2-2.3">Target:</dt>
        <dd style="margin-left: 1.5em" id="section-2-2.4">
          <p id="section-2-2.4.1">A service or resource that clients interact with.<a href="#section-2-2.4.1" class="pilcrow">¶</a></p>
</dd>
        <dd class="break"></dd>
<dt id="section-2-2.5">Proxy:</dt>
        <dd style="margin-left: 1.5em" id="section-2-2.6">
          <p id="section-2-2.6.1">An entity that sits between client and target.<a href="#section-2-2.6.1" class="pilcrow">¶</a></p>
</dd>
        <dd class="break"></dd>
<dt id="section-2-2.7">Application proxy:</dt>
        <dd style="margin-left: 1.5em" id="section-2-2.8">
          <p id="section-2-2.8.1">A proxy that relays application messages between client and target,
such as an OHTTP Oblivious Relay Resource.<a href="#section-2-2.8.1" class="pilcrow">¶</a></p>
</dd>
        <dd class="break"></dd>
<dt id="section-2-2.9">Transport proxy:</dt>
        <dd style="margin-left: 1.5em" id="section-2-2.10">
          <p id="section-2-2.10.1">A proxy that relays end-to-end transport connections between client
and target, such as a MASQUE proxy or WireGuard VPN proxy.<a href="#section-2-2.10.1" class="pilcrow">¶</a></p>
</dd>
      <dd class="break"></dd>
</dl>
</section>
</div>
<div id="threat-model">
<section id="section-3">
      <h2 id="name-threat-model">
<a href="#section-3" class="section-number selfRef">3. </a><a href="#name-threat-model" class="section-name selfRef">Threat Model</a>
      </h2>
<p id="section-3-1">The remote rate limiting (RRL) protocol is based on the following threat model.
Clients are either honest or malicious. Honest clients do not engage in abusive
behavior, whereas malicious clients are carry out whatever behavior they wish,
including abusive behavior. Targets can also be honest or malicious. An honest
target will faithfully use the protocol to protect itself against abuse, whereas
a malicious target will try to use the protocol to carry out the following goals.<a href="#section-3-1" class="pilcrow">¶</a></p>
<ol start="1" type="1" class="normal type-1" id="section-3-2">
<li id="section-3-2.1">De-anonymize honest clients. The attacker aims to use the rate limiting protocol
to violate whatever privacy properties the proxy purports to provide for its
clients.<a href="#section-3-2.1" class="pilcrow">¶</a>
</li>
        <li id="section-3-2.2">Disproportionately and negatively impact honest clients. The attacker aims to
misuse the rate limiting protocol to single out honest clients and cause service
disruption for them.<a href="#section-3-2.2" class="pilcrow">¶</a>
</li>
      </ol>
<p id="section-3-3">Malicious clients can engage in abusive behavior with the intent of disrupting service
for honest targets, or for negatively impacting the proxy service for other honest
clients.<a href="#section-3-3" class="pilcrow">¶</a></p>
<p id="section-3-4">The proxy is assumed to be honest, since a malicious proxy could easily violate
client privacy by revealing the client's IP address to targets.<a href="#section-3-4" class="pilcrow">¶</a></p>
</section>
</div>
<div id="overview">
<section id="section-4">
      <h2 id="name-overview">
<a href="#section-4" class="section-number selfRef">4. </a><a href="#name-overview" class="section-name selfRef">Overview</a>
      </h2>
<p id="section-4-1">Given the threat model in <a href="#threat-model" class="auto internal xref">Section 3</a>, the remote rate limiting (RRL) protocol
is based on the following assumptions:<a href="#section-4-1" class="pilcrow">¶</a></p>
<ol start="1" type="1" class="normal type-1" id="section-4-2">
<li id="section-4-2.1">The definition of abuse varies widely and depends on the target service.
In other words, targets are authoritative for what is considered abusive traffic
that negatively affects the target.<a href="#section-4-2.1" class="pilcrow">¶</a>
</li>
        <li id="section-4-2.2">Rate limiting rules can only be expressed in terms of behavior that can be validated
by both proxy and taget. Importantly, this means that targets can only express rules
in terms of information that both parties know. In other words, targets cannot express
rules in terms of information they do not know. As an example, it is not possible to
express rules in terms of the number of requests per client if the target does not know
how many clients are behind a particular proxy, nor if the proxy does not know the number
of requests that a particular client is sending because the client's connection to the
target is encrypted.<a href="#section-4-2.2" class="pilcrow">¶</a>
</li>
        <li id="section-4-2.3">Proxies cannot trust targets which cannot authenticate themselves, as this can
spoofed by attackers (malicious targets). Moreover, authenticating a target does
not necessarily mean the target is honest; an authenticated target can still engage
in malicious behavior. As such, the rate limiting protocol cannot leak information
to the the privacy proxy that it does not already know. In particular, the protocol
cannot depend on application data that is encrypted and unknown to the proxy.
This ensures that the protocol cannot be misused by targets in an attempt to
deanonymize clients.<a href="#section-4-2.3" class="pilcrow">¶</a>
</li>
        <li id="section-4-2.4">IP addresses are not suitable for authentication and authorization decisions. In
particular, this means that proxies cannot use target IP addresses to determine
whether or not a particular target message is authenticated.<a href="#section-4-2.4" class="pilcrow">¶</a>
</li>
      </ol>
<p id="section-4-3">RRL assumes that proxies are public, i.e., that targets have some realiable means
of discovering or learning about a proxy. RRL is therefore not applicable to deployment
scenarios where the proxy is meant to be private or otherwise does not seek to make its
presence known to targets.<a href="#section-4-3" class="pilcrow">¶</a></p>
<p id="section-4-4">The protocol is divided into two phases: an offline registration phase (<a href="#offline" class="auto internal xref">Section 4.1</a>),
wherein targets obtain authentication material used for the online phase of the protocol,
and an online phase (<a href="#online" class="auto internal xref">Section 4.2</a>), wherein targets send rate limiting rules to the proxy
for enactment. Details about each phase are below.<a href="#section-4-4" class="pilcrow">¶</a></p>
<div id="offline">
<section id="section-4.1">
        <h3 id="name-offline-registration">
<a href="#section-4.1" class="section-number selfRef">4.1. </a><a href="#name-offline-registration" class="section-name selfRef">Offline Registration</a>
        </h3>
<p id="section-4.1-1">Registration is built on ACME, which is a protocol for obtaining authentication credentials
in the form of a certificate. Targets run the ACME protocol with a proxy to obtain
RRL authentication certificates. The certificate issued MUST have the Client Authentication
EKU configured, as it will be used for authenticating the client. They then use these
certificates in the online phase of the protocol.<a href="#section-4.1-1" class="pilcrow">¶</a></p>
<p id="section-4.1-2">[[NOTE: this is pretty straightforward -- what more would we actually need to say here?]]<a href="#section-4.1-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="online">
<section id="section-4.2">
        <h3 id="name-online-rate-limit-enforceme">
<a href="#section-4.2" class="section-number selfRef">4.2. </a><a href="#name-online-rate-limit-enforceme" class="section-name selfRef">Online Rate Limit Enforcement</a>
        </h3>
<p id="section-4.2-1">The online phase of RRL is based on HTTP. Targets, as HTTP clients, send messages to
a proxy Rule Resource to enact rate limit rules. Each rule is meant to limit the number
of acceptable connections or requests in a given time window. Rules are expressed using
the semantics in <span>[<a href="#RATE-LIMIT" class="cite xref">RATE-LIMIT</a>]</span>. In particular,
rate limits represent some limit, a policy (in terms of quota-units), and a time-based
condition after which the limit resets.<a href="#section-4.2-1" class="pilcrow">¶</a></p>
<p id="section-4.2-2">Proxies are configured with a URL for their RRL Rule Resource, e.g., "https://proxy.example/.well-known/rrl-rules".
Targets send POST messages to the proxy Rule Resource with a JSON object
(<span>[<a href="#RFC8259" class="cite xref">RFC8259</a>], <a href="https://rfc-editor.org/rfc/rfc8259#section-4" class="relref">Section 4</a></span>). <a href="#authentication" class="auto internal xref">Section 4.2.1</a> describes the mechanism by which
these requests are authenticated. Note that the reason that RRL relies on targets
pushing messages to proxies rather than proxies pulling from targets is to enable
on-demand application of rate limit rules.<a href="#section-4.2-2" class="pilcrow">¶</a></p>
<p id="section-4.2-3">[[NOTE: Pushing vs pulling rate limit rules is somewhat of an implementation detail -- the salient point is that these messages are authenticated]]<a href="#section-4.2-3" class="pilcrow">¶</a></p>
<p id="section-4.2-4">The contents of the Rule Resource message JSON object are defined in <a href="#rrl-message" class="auto internal xref">Table 1</a>.<a href="#section-4.2-4" class="pilcrow">¶</a></p>
<span id="name-rrl-rule-resource-message"></span><div id="rrl-message">
<table class="center" id="table-1">
          <caption>
<a href="#table-1" class="selfRef">Table 1</a>:
<a href="#name-rrl-rule-resource-message" class="selfRef">RRL Rule Resource message</a>
          </caption>
<thead>
            <tr>
              <th class="text-left" rowspan="1" colspan="1">Field Name</th>
              <th class="text-left" rowspan="1" colspan="1">Value</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">Target (optional)</td>
              <td class="text-left" rowspan="1" colspan="1">Name of the target</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">RateLimit-Limit</td>
              <td class="text-left" rowspan="1" colspan="1">As defined in <span><a href="https://datatracker.ietf.org/doc/html/draft-ietf-httpapi-ratelimit-headers-07#section-5.1" class="relref">Section 5.1</a> of [<a href="#RATE-LIMIT" class="cite xref">RATE-LIMIT</a>]</span> except that parameters are not permitted, encoded as a JSON string.</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">RateLimit-Policy</td>
              <td class="text-left" rowspan="1" colspan="1">As defined in <span><a href="https://datatracker.ietf.org/doc/html/draft-ietf-httpapi-ratelimit-headers-07#section-5.2" class="relref">Section 5.2</a> of [<a href="#RATE-LIMIT" class="cite xref">RATE-LIMIT</a>]</span> except that parameters other than "unit" and "scope" are not permitted, encoded as a JSON string.</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">RateLimit-Reset</td>
              <td class="text-left" rowspan="1" colspan="1">As defined in <span><a href="https://datatracker.ietf.org/doc/html/draft-ietf-httpapi-ratelimit-headers-07#section-5.4" class="relref">Section 5.4</a> of [<a href="#RATE-LIMIT" class="cite xref">RATE-LIMIT</a>]</span> except that parameters are not permitted, encoded as a JSON string.</td>
            </tr>
          </tbody>
        </table>
</div>
<p id="section-4.2-6">The "unit" parameter for the RateLimit-Policy field has the following permissible values:<a href="#section-4.2-6" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-4.2-7.1">requests: This means the rate limit quota applies to HTTP requests. This is only enforceable
by a proxy if it can see requests, e.g., if it is an OHTTP Relay Resource (see <span><a href="https://datatracker.ietf.org/doc/html/draft-ietf-ohai-ohttp-09#section-2" class="relref">Section 2</a> of [<a href="#OHTTP" class="cite xref">OHTTP</a>]</span>).<a href="#section-4.2-7.1" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-4.2-7.2">connections: This means the rate limit quota applies to number of connections.<a href="#section-4.2-7.2" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-4.2-7.3">bandwidth: This means the rate limit applies to the bandwidth consumed by a given connection or request.<a href="#section-4.2-7.3" class="pilcrow">¶</a>
</li>
        </ul>
<p id="section-4.2-8">The "scope" parameter for the RateLimit-Policy field has the following permissible values:<a href="#section-4.2-8" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-4.2-9.1">total: This means the rate limit quota applies to all client traffic from the proxy to the target.<a href="#section-4.2-9.1" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-4.2-9.2">single: This means the rate limit quota applies to individual client traffic from proxy to target.<a href="#section-4.2-9.2" class="pilcrow">¶</a>
</li>
        </ul>
<p id="section-4.2-10">Proxies MUST validate the values received in the Rule Resource message fields as described
in <a href="#validation-and-enforcement" class="auto internal xref">Section 4.2.2</a>. Proxies MAY ignore malformed Rule Resource messages and
respond to them with a 400 error. Proxies that validate and accept Rule Resource messages
respond to them with 200 OK messages. Proxies enforce these rules sent to the Rule Resource
as described in <a href="#validation-and-enforcement" class="auto internal xref">Section 4.2.2</a>.<a href="#section-4.2-10" class="pilcrow">¶</a></p>
<p id="section-4.2-11">Sample Rule Resource messages and the scenario to which they would apply are in <a href="#applications" class="auto internal xref">Section 5</a>.<a href="#section-4.2-11" class="pilcrow">¶</a></p>
<div id="authentication">
<section id="section-4.2.1">
          <h4 id="name-authentication">
<a href="#section-4.2.1" class="section-number selfRef">4.2.1. </a><a href="#name-authentication" class="section-name selfRef">Authentication</a>
          </h4>
<p id="section-4.2.1-1">Rule Resource messages are authenticated using credentials obtained during the offline registration phase.
There are several options for request authentication, including those below:<a href="#section-4.2.1-1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-4.2.1-2.1">Mutually authenticated TLS. In this option, targets establish a mutually authenticated TLS connection
to the proxy, using their credentials, before sending any Rule Resource messages.<a href="#section-4.2.1-2.1" class="pilcrow">¶</a>
</li>
            <li class="normal" id="section-4.2.1-2.2">Message signing. In this option, targets sign the content of the Rule Resource message using
their credentials and produce a signature according to <span><a href="https://datatracker.ietf.org/doc/html/draft-ietf-httpbis-message-signatures-19#section-3.1" class="relref">Section 3.1</a> of [<a href="#MESSAGE-SIGNATURES" class="cite xref">MESSAGE-SIGNATURES</a>]</span>.
Proxies verify the signature using the credentials according to <span><a href="https://datatracker.ietf.org/doc/html/draft-ietf-httpbis-message-signatures-19#section-3.2" class="relref">Section 3.2</a> of [<a href="#MESSAGE-SIGNATURES" class="cite xref">MESSAGE-SIGNATURES</a>]</span>.<a href="#section-4.2.1-2.2" class="pilcrow">¶</a>
</li>
          </ul>
<p id="section-4.2.1-3">[[OPEN ISSUE: The HTTP message signature keyid needs to contain enough information for the proxy to obtain the credentials used for verifying the signature, so it's tightly bound to the way registration works. This is not specified now and needs more thought.]]<a href="#section-4.2.1-3" class="pilcrow">¶</a></p>
<p id="section-4.2.1-4">Proxies authenticate requests using one of these options (or something with similar properties).<a href="#section-4.2.1-4" class="pilcrow">¶</a></p>
</section>
</div>
<div id="validation-and-enforcement">
<section id="section-4.2.2">
          <h4 id="name-validation-and-enforcement">
<a href="#section-4.2.2" class="section-number selfRef">4.2.2. </a><a href="#name-validation-and-enforcement" class="section-name selfRef">Validation and Enforcement</a>
          </h4>
<p id="section-4.2.2-1">Rule Resource message validity depends on the proxy's behavior and, in particular, whether
the proxy is an application or transport proxy. Application proxies can observe the client
request boundaries, but cannot view their contents. In contrast, transport proxies can only
observe connection boundaries and cannot view request boundaries. As such, validation rules
are different depending on the type of proxy, though there are some general Rule Resource
message validation steps that apply to both. These common rules are as follows:<a href="#section-4.2.2-1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-4.2.2-2.1">Check that the RateLimit-Reset field is not too far in the future.<a href="#section-4.2.2-2.1" class="pilcrow">¶</a>
</li>
            <li class="normal" id="section-4.2.2-2.2">Check that the RateLimit-Limit is not too high.<a href="#section-4.2.2-2.2" class="pilcrow">¶</a>
</li>
            <li class="normal" id="section-4.2.2-2.3">Check that the RateLimit-Limit, RateLimit-Policy, and RateLimit-Reset fields do not contain any unexpected parameters.<a href="#section-4.2.2-2.3" class="pilcrow">¶</a>
</li>
          </ul>
<p id="section-4.2.2-3">Beyond these general validation rules, the validation rules for application proxies are as follows:<a href="#section-4.2.2-3" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-4.2.2-4.1">Check that the RateLimit-Policy "unit" parameter is present and has the value "requests" if the "scope" parameter is "total",
else the "unit" parameter has the value "bandwidth." This has the effect of limiting total number of requests to
the target or the size of any one request.<a href="#section-4.2.2-4.1" class="pilcrow">¶</a>
</li>
          </ul>
<p id="section-4.2.2-5">Likewise, beyond the general validation rules above, the validation rules for transport proxies are as follows:<a href="#section-4.2.2-5" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-4.2.2-6.1">Check that the RateLimit-Policy "unit" parameter is present and has the value "connections" if the "scope" parameter is "total",
else the "unit" parameter has the value "bandwidth." This has the effect of limiting total number of connections to
the target or the bandwidth consumed by any one connection.<a href="#section-4.2.2-6.1" class="pilcrow">¶</a>
</li>
          </ul>
<p id="section-4.2.2-7">If all checks pass, then the message is considered valid.<a href="#section-4.2.2-7" class="pilcrow">¶</a></p>
<p id="section-4.2.2-8">Proxies can enforce valid Rule Resource messages but are not required to do so. Enforcing a message
means enacting rate limit rules uniformly across all clients to the target; Proxies MUST NOT apply
any rate limit actions with "scope" equal to "total" on a per-client basis.<a href="#section-4.2.2-8" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="limitations">
<section id="section-4.3">
        <h3 id="name-limitations">
<a href="#section-4.3" class="section-number selfRef">4.3. </a><a href="#name-limitations" class="section-name selfRef">Limitations</a>
        </h3>
<p id="section-4.3-1">The RRL protocol is limited in several important ways:<a href="#section-4.3-1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-4.3-2.1">RRL is only usable by targets which can authenticate themselves. This means that services which, for example,
are not capable of running HTTPS because they have not yet implemented ACME support, will not be able to
submit RRL messages.<a href="#section-4.3-2.1" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-4.3-2.2">RRL does not support mitigation of attacks that span targets. This is because there is no straightforward
way for proxies to authenticate and validate the legitimacy of rate limit requests from two independent
targets.<a href="#section-4.3-2.2" class="pilcrow">¶</a>
</li>
        </ul>
</section>
</div>
</section>
</div>
<div id="applications">
<section id="section-5">
      <h2 id="name-applications">
<a href="#section-5" class="section-number selfRef">5. </a><a href="#name-applications" class="section-name selfRef">Applications</a>
      </h2>
<p id="section-5-1">This section contains example applications of RRL that may be used to mitigate attacks enabled
or otherwise exacerbated by deployed proxy technologies.<a href="#section-5-1" class="pilcrow">¶</a></p>
<div id="ohttp-dos">
<section id="section-5.1">
        <h3 id="name-ohttp-dos">
<a href="#section-5.1" class="section-number selfRef">5.1. </a><a href="#name-ohttp-dos" class="section-name selfRef">OHTTP DoS</a>
        </h3>
<p id="section-5.1-1">A rule for mitigating OHTTP attacks, which seek to overwhelm the target with too many requests is below.
In this example, the policy expresses that the target can handle at most 100 requests per minute.<a href="#section-5.1-1" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-5.1-2">
<pre>
{
   "RateLimit-Limit": 100,
   "RateLimit-Policy": "60; scope='total'; unit='requests'",
}
</pre><a href="#section-5.1-2" class="pilcrow">¶</a>
</div>
<p id="section-5.1-3">Similarly, a rule for mitigating OHTTP attacks due to excessively large messages (larger than 1024B) is below.<a href="#section-5.1-3" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-5.1-4">
<pre>
{
   "RateLimit-Limit": 1024,
   "RateLimit-Policy": "60; scope='single'; unit='bandwidth'",
}
</pre><a href="#section-5.1-4" class="pilcrow">¶</a>
</div>
<p id="section-5.1-5">Since OHTTP is an application proxy protocol, it is not possible to safely express rate limits that limit
the number of requests from any one client, as this could be misused by malicious targets to de-anonymize
clients.<a href="#section-5.1-5" class="pilcrow">¶</a></p>
</section>
</div>
<div id="port-scanning-dos">
<section id="section-5.2">
        <h3 id="name-port-scanning-dos">
<a href="#section-5.2" class="section-number selfRef">5.2. </a><a href="#name-port-scanning-dos" class="section-name selfRef">Port Scanning DoS</a>
        </h3>
<p id="section-5.2-1">A rule for mitigating port scanning attacks, which open many connections to the target server in a short
amount of time, is shown below. In this example, the threshold for port scanning is determined to be more
than 10 connections per minute.<a href="#section-5.2-1" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-5.2-2">
<pre>
{
   "RateLimit-Limit": 10,
   "RateLimit-Policy": "60; scope='total'; unit='connections'",
}
</pre><a href="#section-5.2-2" class="pilcrow">¶</a>
</div>
</section>
</div>
<div id="volumetric-dos">
<section id="section-5.3">
        <h3 id="name-volumetric-dos">
<a href="#section-5.3" class="section-number selfRef">5.3. </a><a href="#name-volumetric-dos" class="section-name selfRef">Volumetric DoS</a>
        </h3>
<p id="section-5.3-1">A rule for mitigating volumetric attacks, which sends excessive data to the target server in a short
amount of time, is shown below. In this example, the threshold for port scanning is determined to be more
than 65536 bytes per connection in a given minute.<a href="#section-5.3-1" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-5.3-2">
<pre>
{
   "RateLimit-Limit": 65536,
   "RateLimit-Policy": "1; scope='total'; unit='bandwidth'; w=60",
}
</pre><a href="#section-5.3-2" class="pilcrow">¶</a>
</div>
</section>
</div>
</section>
</div>
<div id="security">
<section id="section-6">
      <h2 id="name-security-considerations">
<a href="#section-6" class="section-number selfRef">6. </a><a href="#name-security-considerations" class="section-name selfRef">Security Considerations</a>
      </h2>
<p id="section-6-1">The RRL protocol was motivated by the need to ensure that operational security does not regress
in the name of client privacy. As such, the design of RRL intentionally restricts what sort of
security mitigations can be enacted in practice. A consequence of this is that certain classes of
attack may not be mitigated entirely by RRL. For example, in the case of OHTTP, it is not possible
to limit the number of requests per any single client, since enforcing such a policy might be abused
by malicious targets to de-anonymize clients. As such, RRL is complementary to other approaches
for dealing with attacks from individual clients, such as Privacy Pass.<a href="#section-6-1" class="pilcrow">¶</a></p>
<p id="section-6-2">The RRL protocol is designed to allow any target which can authenticate itself to send rate limit
rules to the proxy. Each rate limit rule does require the proxy to store state for enacting the rule.
As such, absent restrictions, malicious targets could abuse this mechanism to exhaust resources
on the proxy. In settings where this is a problem, proxies SHOULD apply some form of allow list
for targets to ensure that state does not grow unbounded.<a href="#section-6-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="iana">
<section id="section-7">
      <h2 id="name-iana-considerations">
<a href="#section-7" class="section-number selfRef">7. </a><a href="#name-iana-considerations" class="section-name selfRef">IANA Considerations</a>
      </h2>
<p id="section-7-1">This document has no IANA actions.<a href="#section-7-1" class="pilcrow">¶</a></p>
</section>
</div>
<section id="section-8">
      <h2 id="name-references">
<a href="#section-8" class="section-number selfRef">8. </a><a href="#name-references" class="section-name selfRef">References</a>
      </h2>
<section id="section-8.1">
        <h3 id="name-normative-references">
<a href="#section-8.1" class="section-number selfRef">8.1. </a><a href="#name-normative-references" class="section-name selfRef">Normative References</a>
        </h3>
<dl class="references">
<dt id="MESSAGE-SIGNATURES">[MESSAGE-SIGNATURES]</dt>
        <dd>
<span class="refAuthor">Backman, A.</span>, <span class="refAuthor">Richer, J.</span>, and <span class="refAuthor">M. Sporny</span>, <span class="refTitle">"HTTP Message Signatures"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-ietf-httpbis-message-signatures-19</span>, <time datetime="2023-07-26" class="refDate">26 July 2023</time>, <span>&lt;<a href="https://datatracker.ietf.org/doc/html/draft-ietf-httpbis-message-signatures-19">https://datatracker.ietf.org/doc/html/draft-ietf-httpbis-message-signatures-19</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RATE-LIMIT">[RATE-LIMIT]</dt>
        <dd>
<span class="refAuthor">Polli, R.</span> and <span class="refAuthor">A. M. Ruiz</span>, <span class="refTitle">"RateLimit header fields for HTTP"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-ietf-httpapi-ratelimit-headers-07</span>, <time datetime="2023-06-24" class="refDate">24 June 2023</time>, <span>&lt;<a href="https://datatracker.ietf.org/doc/html/draft-ietf-httpapi-ratelimit-headers-07">https://datatracker.ietf.org/doc/html/draft-ietf-httpapi-ratelimit-headers-07</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC2119">[RFC2119]</dt>
        <dd>
<span class="refAuthor">Bradner, S.</span>, <span class="refTitle">"Key words for use in RFCs to Indicate Requirement Levels"</span>, <span class="seriesInfo">BCP 14</span>, <span class="seriesInfo">RFC 2119</span>, <span class="seriesInfo">DOI 10.17487/RFC2119</span>, <time datetime="1997-03" class="refDate">March 1997</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc2119">https://www.rfc-editor.org/rfc/rfc2119</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8174">[RFC8174]</dt>
        <dd>
<span class="refAuthor">Leiba, B.</span>, <span class="refTitle">"Ambiguity of Uppercase vs Lowercase in RFC 2119 Key Words"</span>, <span class="seriesInfo">BCP 14</span>, <span class="seriesInfo">RFC 8174</span>, <span class="seriesInfo">DOI 10.17487/RFC8174</span>, <time datetime="2017-05" class="refDate">May 2017</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc8174">https://www.rfc-editor.org/rfc/rfc8174</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8259">[RFC8259]</dt>
      <dd>
<span class="refAuthor">Bray, T., Ed.</span>, <span class="refTitle">"The JavaScript Object Notation (JSON) Data Interchange Format"</span>, <span class="seriesInfo">STD 90</span>, <span class="seriesInfo">RFC 8259</span>, <span class="seriesInfo">DOI 10.17487/RFC8259</span>, <time datetime="2017-12" class="refDate">December 2017</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc8259">https://www.rfc-editor.org/rfc/rfc8259</a>&gt;</span>. </dd>
<dd class="break"></dd>
</dl>
</section>
<section id="section-8.2">
        <h3 id="name-informative-references">
<a href="#section-8.2" class="section-number selfRef">8.2. </a><a href="#name-informative-references" class="section-name selfRef">Informative References</a>
        </h3>
<dl class="references">
<dt id="CONNECT-UDP">[CONNECT-UDP]</dt>
        <dd>
<span class="refAuthor">Schinazi, D.</span>, <span class="refTitle">"Proxying UDP in HTTP"</span>, <span class="seriesInfo">RFC 9298</span>, <span class="seriesInfo">DOI 10.17487/RFC9298</span>, <time datetime="2022-08" class="refDate">August 2022</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc9298">https://www.rfc-editor.org/rfc/rfc9298</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="OHTTP">[OHTTP]</dt>
        <dd>
<span class="refAuthor">Thomson, M.</span> and <span class="refAuthor">C. A. Wood</span>, <span class="refTitle">"Oblivious HTTP"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-ietf-ohai-ohttp-09</span>, <time datetime="2023-07-27" class="refDate">27 July 2023</time>, <span>&lt;<a href="https://datatracker.ietf.org/doc/html/draft-ietf-ohai-ohttp-09">https://datatracker.ietf.org/doc/html/draft-ietf-ohai-ohttp-09</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="OHTTP-RateLimit">[OHTTP-RateLimit]</dt>
        <dd>
<span class="refAuthor">Reddy.K, T.</span>, <span class="refAuthor">Wing, D.</span>, <span class="refAuthor">Boucadair, M.</span>, and <span class="refAuthor">R. Polli</span>, <span class="refTitle">"Oblivious Relay Feedback"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-rdb-ohai-feedback-to-proxy-09</span>, <time datetime="2023-05-14" class="refDate">14 May 2023</time>, <span>&lt;<a href="https://datatracker.ietf.org/doc/html/draft-rdb-ohai-feedback-to-proxy-09">https://datatracker.ietf.org/doc/html/draft-rdb-ohai-feedback-to-proxy-09</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="PRIVACY-PASS">[PRIVACY-PASS]</dt>
        <dd>
<span class="refAuthor">Davidson, A.</span>, <span class="refAuthor">Iyengar, J.</span>, and <span class="refAuthor">C. A. Wood</span>, <span class="refTitle">"The Privacy Pass Architecture"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-ietf-privacypass-architecture-14</span>, <time datetime="2023-08-09" class="refDate">9 August 2023</time>, <span>&lt;<a href="https://datatracker.ietf.org/doc/html/draft-ietf-privacypass-architecture-14">https://datatracker.ietf.org/doc/html/draft-ietf-privacypass-architecture-14</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="WIREGUARD">[WIREGUARD]</dt>
      <dd>
<span class="refTitle">"WireGuard: Next Generation Kernel Network Tunnel"</span>, <span>n.d.</span>, <span>&lt;<a href="https://www.ndss-symposium.org/wp-content/uploads/2017/09/ndss2017_04A-3_Donenfeld_paper.pdf">https://www.ndss-symposium.org/wp-content/uploads/2017/09/ndss2017_04A-3_Donenfeld_paper.pdf</a>&gt;</span>. </dd>
<dd class="break"></dd>
</dl>
</section>
</section>
<div id="acknowledgements">
<section id="appendix-A">
      <h2 id="name-acknowledgements">
<a href="#appendix-A" class="section-number selfRef">Appendix A. </a><a href="#name-acknowledgements" class="section-name selfRef">Acknowledgements</a>
      </h2>
<p id="appendix-A-1">This document was inspired by <span>[<a href="#OHTTP-RateLimit" class="cite xref">OHTTP-RateLimit</a>]</span>,
which was focused on a variant of the problem addressed by this document and
tailored specifically to work within OHTTP, rather than alongside it.<a href="#appendix-A-1" class="pilcrow">¶</a></p>
<p id="appendix-A-2">This document was improved by contributions and feedback from Lucas Pardue and Tommy Pauly.<a href="#appendix-A-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="authors-addresses">
<section id="appendix-B">
      <h2 id="name-authors-address">
<a href="#name-authors-address" class="section-name selfRef">Author's Address</a>
      </h2>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Christopher A. Wood</span></div>
<div dir="auto" class="left"><span class="org">Cloudflare</span></div>
<div dir="auto" class="left"><span class="street-address">101 Townsend St</span></div>
<div dir="auto" class="left">
<span class="locality">San Francisco</span>,  </div>
<div dir="auto" class="left"><span class="country-name">United States of America</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:caw@heapingbits.net" class="email">caw@heapingbits.net</a>
</div>
</address>
</section>
</div>
<script>const toc = document.getElementById("toc");
toc.querySelector("h2").addEventListener("click", e => {
  toc.classList.toggle("active");
});
toc.querySelector("nav").addEventListener("click", e => {
  toc.classList.remove("active");
});
</script>
</body>
</html>
